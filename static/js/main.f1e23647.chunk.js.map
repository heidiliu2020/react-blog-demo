{"version":3,"sources":["contexts.js","utils.js","WebAPI.js","constants/style.js","components/Header/Header.js","components/Footer/Footer.js","components/Loading/Loading.js","pages/HomePage/HomePage.js","pages/LoginPage/LoginPage.js","pages/RegisterPage/RegisterPage.js","pages/AboutPage/AboutPage.js","components/Pagination/Pagination.js","pages/PostListPage/PostListPage.js","pages/PostPage/PostPage.js","pages/NewPostPage/NewPostPage.js","components/App/App.js","index.js"],"names":["AuthContext","createContext","LoadingContext","TOKEN_NAME","setAuthToken","token","localStorage","setItem","getAuthToken","getItem","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","ClickTop","styled","div","BASE_URL","getLimitPosts","page","limit","fetch","then","res","json","getMe","headers","authorization","MEDIA_QUERY","HeaderContainer","Brand","NavbarList","ul","StyledLink","NavLink","props","activeClassName","LoadingGetMe","Header","isLoadingGetMe","useContext","user","setUser","location","history","useHistory","id","to","replace","exact","onClick","push","FooterContainer","Footer","href","rel","target","LoadingWapper","Loading","size","color","HomePageWrapper","PostsListContainer","PostsListTitle","PostContainer","PostHeader","PostTitle","Link","PostDate","PostBody","ReadMore","PostList","post","title","Date","createdAt","toLocaleDateString","body","HomePage","isLoading","setIsLoading","useState","posts","setPosts","map","LoginWrapper","LoginForm","form","LoginTitle","LoginInput","LoginSubmit","LinkToRegister","ErrorMessage","SubmitLoading","LoginPage","username","setUsername","password","setPassword","errorMessage","setErrorMessage","handleInputFocus","onSubmit","e","preventDefault","method","JSON","stringify","login","data","ok","message","response","toString","value","onChange","onFocus","type","RegisterWrapper","RegisterForm","RegisterTitle","RegisterInput","RegisterSubmit","LinkToLogin","RegisterPage","nickname","setNickname","register","AboutWrapper","AboutContainter","AboutTitle","h2","AboutContent","AboutPage","Root","PaginationContainer","PageButton","button","className","Pagination","totalPages","currentPage","setCurrentPage","current","handlePageClick","PostListWrapper","PostRight","PostDeleteButton","handleDeletePost","userId","PostListPage","useRef","pages","i","getPages","Math","ceil","length","deletePost","catch","err","console","log","PostWrapper","PostAuthor","PostPage","setPost","useParams","getPost","toLocaleString","NewPostWrapper","NewPostForm","NewPostLable","NewPostTitleInput","input","NewPostTextArea","textarea","NewPostSubmit","NewPostLoading","NewPostPage","setTitle","setBody","addNewPost","rows","App","setLoadingGetMe","Provider","anchorName","anchorElement","document","getElementById","scrollIntoView","scrollToAnchor","path","ReactDOM","render"],"mappings":"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","file":"static/js/main.f1e23647.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\n// 初始值為 null\nexport const AuthContext = createContext(null);\nexport const LoadingContext = createContext(null);\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nconst TOKEN_NAME = \"token\";\n\nexport const setAuthToken = (token) => {\n  localStorage.setItem(TOKEN_NAME, token);\n};\n\nexport const getAuthToken = () => {\n  return localStorage.getItem(TOKEN_NAME);\n};\n\nexport const getPages = (totalPages) => {\n  let pages = [];\n  for (let i = 1; i <= totalPages; i++) {\n    pages.push(i);\n  }\n  return pages;\n};\n\n// 路徑改變就自動到 TOP\nexport function ScrollToTop() {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n}\n\nexport const ClickTop = styled.div`\n  cursor: pointer;\n  padding: 4px 8px;\n  font-size: 14px;\n  position: fixed;\n  bottom: 5%;\n  right: 5%;\n  color: #eee;\n  background: #222;\n  z-index: 5;\n  opacity: 0.6;\n  :hover {\n    opacity: 0.9;\n  }\n`;\n\nexport const scrollToAnchor = (anchorName) => {\n  if (anchorName) {\n    let anchorElement = document.getElementById(anchorName);\n    if (anchorElement) {\n      anchorElement.scrollIntoView();\n    }\n  }\n};\n","import { getAuthToken } from \"./utils\";\n\nconst BASE_URL = \"https://student-json-api.lidemy.me\";\n\n// 讀取所有文章\nexport const getPosts = () =>\n  fetch(`${BASE_URL}/posts?_sort=createdAt&_order=desc`).then((res) =>\n    res.json()\n  );\n\n// 讀取單篇文章\nexport const getPost = (id) =>\n  fetch(`${BASE_URL}/posts?id=${id}&_expand=user`).then((res) => res.json());\n\n// 依照X頁數，讀取Y篇文章\nexport const getLimitPosts = (page, limit) =>\n  fetch(\n    `${BASE_URL}/posts?_page=${page}&_limit=${limit}&_sort=createdAt&_order=desc`\n  ).then((res) => res.json());\n\n// 刪除文章\nexport const deletePost = (id) => {\n  return fetch(\"https://student-json-api.lidemy.me/posts/\" + id, {\n    method: \"DELETE\",\n  }).then((res) => res.json());\n};\n\n// 發布文章\nexport const addNewPost = (title, body) => {\n  // 從 localStorage 拿取 token\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/posts`, {\n    method: \"POST\",\n    headers: {\n      authorization: `Bearer ${token}`,\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      title,\n      body,\n    }),\n  }).then((res) => res.json());\n};\n\n// 註冊\nexport const register = ({ username, password, nickname }) => {\n  return fetch(`${BASE_URL}/register`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      nickname,\n      username,\n      password,\n    }),\n  }).then((res) => res.json());\n};\n\n// 登入\nexport const login = ({ username, password }) => {\n  return fetch(`${BASE_URL}/login`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      username,\n      password,\n    }),\n  }).then((res) => res.json());\n};\n\n// 身分驗證\nexport const getMe = () => {\n  // 從 localStorage 拿取 token\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/me`, {\n    headers: {\n      authorization: `Bearer ${token}`,\n    },\n  }).then((res) => res.json());\n};\n","export const MEDIA_QUERY = \"@media screen and (max-width: 768px)\";\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { Link, NavLink, useHistory, useLocation } from \"react-router-dom\";\n\nimport { AuthContext, LoadingContext } from \"../../contexts\";\nimport { setAuthToken } from \"../../utils\";\nimport { MEDIA_QUERY } from \"../../constants/style\";\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  box-shadow: 0px 0px 8px rgb(199, 197, 197);\n  padding: 0 32px;\n  background: #fff;\n\n  ${MEDIA_QUERY} {\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n  }\n`;\n\nconst Brand = styled.div`\n  font-size: 28px;\n  white-space: nowrap;\n  font-weight: 700;\n\n  /* 可選取子層的 Link 元素 */\n  a {\n    text-decoration: none;\n    color: #333;\n    padding: 8px;\n  }\n\n  ${MEDIA_QUERY} {\n    font-size: 24px;\n    padding: 6px 0;\n  }\n`;\n\nconst NavbarList = styled.ul`\n  display: flex;\n  align-items: center;\n  list-style-type: none;\n  text-decoration: none;\n  margin: 0;\n  padding: 0;\n\n  ${MEDIA_QUERY} {\n    font-size: 24px;\n    justify-content: space-evenly;\n  }\n`;\n\nconst StyledLink = styled(NavLink)`\n  height: 58px;\n  width: 82px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-decoration: none;\n  color: #666;\n\n  /* activeClassName: 設置選中樣式，預設為 active */\n  &.${(props) => props.activeClassName} {\n    background: #eee;\n  }\n\n  ${MEDIA_QUERY} {\n    font-size: 18px;\n    height: 32px;\n\n    &.${(props) => props.activeClassName} {\n      background: #fff;\n      color: #999;\n    }\n  }\n`;\n\nconst LoadingGetMe = styled.div`\n  height: 58px;\n  width: 164px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #666;\n`;\n\nexport default function Header() {\n  const { isLoadingGetMe } = useContext(LoadingContext);\n  const { user, setUser } = useContext(AuthContext);\n  const location = useLocation();\n\n  const history = useHistory();\n\n  const handleLogout = () => {\n    setAuthToken(\"\");\n    setUser(null);\n    if (location.pathname !== \"/\") {\n      history.push(\"/\");\n    }\n  };\n\n  return (\n    <HeaderContainer id=\"page-top\">\n      <Brand>\n        {/* 加上 replace: 避免出現錯誤 -> \"Hash history cannot PUSH the same path\" */}\n        <Link to=\"/\" replace>\n          Heidi's Blog\n        </Link>\n      </Brand>\n      <NavbarList>\n        <StyledLink exact to=\"/about\" replace activeClassName=\"active\">\n          關於我\n        </StyledLink>\n        <StyledLink to=\"/post-list/\" replace activeClassName=\"active\">\n          文章列表\n        </StyledLink>\n        {isLoadingGetMe ? (\n          <LoadingGetMe>資料讀取中...</LoadingGetMe>\n        ) : (\n          <>\n            {!user && (\n              <StyledLink to=\"/register\" replace activeClassName=\"active\">\n                註冊\n              </StyledLink>\n            )}\n            {!user && (\n              <StyledLink to=\"/login\" replace activeClassName=\"active\">\n                登入\n              </StyledLink>\n            )}\n            {user && (\n              <StyledLink to=\"/new-post\" replace activeClassName=\"active\">\n                發布文章\n              </StyledLink>\n            )}\n            {user && (\n              <StyledLink to=\"\" replace onClick={handleLogout}>\n                登出\n              </StyledLink>\n            )}\n          </>\n        )}\n      </NavbarList>\n    </HeaderContainer>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst FooterContainer = styled.div`\n  text-align: center;\n  padding: 6px;\n  letter-spacing: 1px;\n  background: #000;\n  color: #eee;\n\n  & a {\n    text-decoration: none;\n    color: #338ccc;\n  }\n  & a:hover {\n    color: #eee;\n  }\n`;\n\nexport default function Footer() {\n  return (\n    <FooterContainer>\n      © 2020{\" \"}\n      <a\n        href=\"https://github.com/heidiliu2020\"\n        rel=\"noreferrer\"\n        target=\"_blank\"\n      >\n        Heidi\n      </a>\n      {\" ♥ \"}\n      Powered by React\n    </FooterContainer>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { PuffLoader } from \"react-spinners\";\n\nconst LoadingWapper = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport default function Loading() {\n  return (\n    <LoadingWapper>\n      <PuffLoader size={60} color={\"#4A90E2\"} />\n    </LoadingWapper>\n  );\n}\n","import React, { useState, useEffect, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\n\nimport { MEDIA_QUERY } from \"../../constants/style\";\nimport { getLimitPosts } from \"../../WebAPI\";\nimport { LoadingContext } from \"../../contexts\";\nimport Loading from \"../../components/Loading\";\n\nconst HomePageWrapper = styled.div`\n  min-height: 100vh;\n  padding: 100px 30px;\n\n  ${MEDIA_QUERY} {\n    padding: 30px;\n  }\n`;\n\nconst PostsListContainer = styled.div`\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 40px 60px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 10px;\n  background: rgba(246, 246, 246, 0.9);\n\n  ${MEDIA_QUERY} {\n    margin: 30px auto;\n    padding: 30px;\n  }\n`;\n\nconst PostsListTitle = styled.div`\n  text-align: center;\n  font-size: 30px;\n  font-weight: 700;\n  color: #333;\n`;\n\nconst PostContainer = styled.div`\n  border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n  padding: 20px 0;\n\n  ${MEDIA_QUERY} {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n`;\n\nconst PostHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n\nconst PostTitle = styled(Link)`\n  font-size: 24px;\n  font-weight: 700;\n  color: #333;\n  text-decoration: none;\n`;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.5);\n`;\n\nconst PostBody = styled.div`\n  font-size: 20px;\n  letter-spacing: 3px;\n  line-height: 1.5;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 550px;\n  max-height: 100px;\n`;\n\nconst ReadMore = styled.div`\n  margin-top: 24px;\n  text-align: center;\n\n  a {\n    border-radius: 30px;\n    font-size: 16px;\n    padding: 8px 10px;\n    border: 1px solid #555;\n    background: #555;\n    color: #eee;\n    text-decoration: none;\n  }\n`;\n\nfunction PostList({ post }) {\n  return (\n    <PostContainer>\n      <PostHeader>\n        <PostTitle to={`/post/${post.id}`}>\n          [#{post.id}] {post.title}\n        </PostTitle>\n        <PostDate>{new Date(post.createdAt).toLocaleDateString()}</PostDate>\n      </PostHeader>\n      <PostBody>{post.body}</PostBody>\n    </PostContainer>\n  );\n}\n\nPostList.propTypes = {\n  post: PropTypes.object,\n};\n\nexport default function HomePage() {\n  const { isLoading, setIsLoading } = useContext(LoadingContext);\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    setIsLoading(true);\n    getLimitPosts(1, 5)\n      .then((posts) => setPosts(posts))\n      .then(() => {\n        setIsLoading(false);\n      });\n  }, [setIsLoading]);\n\n  return (\n    <HomePageWrapper>\n      {isLoading ? (\n        <Loading />\n      ) : (\n        <PostsListContainer>\n          <PostsListTitle>最新文章</PostsListTitle>\n          {posts && posts.map((post) => <PostList post={post} key={post.id} />)}\n          <ReadMore>\n            <Link to=\"/post-list\">查看更多</Link>\n          </ReadMore>\n        </PostsListContainer>\n      )}\n    </HomePageWrapper>\n  );\n}\n","import React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { login, getMe } from \"../../WebAPI\";\nimport { setAuthToken } from \"../../utils\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { AuthContext } from \"../../contexts\";\nimport { LoadingContext } from \"../../contexts\";\n\nconst LoginWrapper = styled.div`\n  height: 100vh;\n`;\n\nconst LoginForm = styled.form`\n  max-width: 450px;\n  margin: 120px auto;\n  padding: 30px 50px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n  font-size: 18px;\n`;\n\nconst LoginTitle = styled.div`\n  font-size: 28px;\n  font-weight: 700;\n  margin-bottom: 28px;\n  text-align: center;\n`;\n\nconst LoginInput = styled.div`\n  margin-bottom: 28px;\n\n  & input {\n    width: 100%;\n    padding: 8px;\n    font-size: 18px;\n    outline: transparent;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    letter-spacing: 1.5px;\n    margin-top: 8px;\n  }\n`;\n\nconst LoginSubmit = styled.div`\n  display: flex;\n  justify-content: space-evenly;\n\n  & button {\n    background: #555;\n    color: #eee;\n    outline: transparent;\n  }\n\n  & button,\n  a {\n    cursor: pointer;\n    border-radius: 20px;\n    font-size: 18px;\n    padding: 6px 20px;\n    border: 1px solid #555;\n  }\n`;\n\nconst LinkToRegister = styled(Link)`\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  background: #eee;\n  color: #555;\n`;\n\nconst ErrorMessage = styled.div`\n  margin-bottom: 16px;\n  color: #db4c3f;\n  font-weight: 700;\n`;\n\nconst SubmitLoading = styled.div`\n  font-weight: 700;\n  color: #555;\n  padding: 10px;\n`;\n\nexport default function LoginPage() {\n  const { isLoading, setIsLoading } = useContext(LoadingContext);\n  const { setUser } = useContext(AuthContext);\n  // 在 React 中 value 若是 undefined，等同於沒有傳 value\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  // 阻止送出表單\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    login({ username, password }).then((data) => {\n      // 若 ok 為 0 代表錯誤\n      if (data.ok === 0) {\n        setIsLoading(false);\n        return setErrorMessage(data.message);\n      }\n      // 成功的話就把 token 存到 localStorage\n      setAuthToken(data.token);\n\n      getMe().then((response) => {\n        if (response.ok !== 1) {\n          setIsLoading(false);\n          // 在 getMe() 出錯代表還沒成功登入，因此要把 token 清空\n          setAuthToken(null);\n          setErrorMessage(response.toString());\n        }\n        setUser(response.data);\n        // 並導回首頁\n        history.push(\"/\");\n      });\n    });\n  };\n\n  const handleInputFocus = () => {\n    setErrorMessage(null);\n  };\n\n  const handleUsernameChange = (e) => {\n    setUsername(e.target.value);\n  };\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  return (\n    <LoginWrapper>\n      <LoginForm onSubmit={handleSubmit}>\n        <LoginTitle>登入</LoginTitle>\n        {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n        <LoginInput>\n          username:\n          <input\n            value={username}\n            onChange={handleUsernameChange}\n            onFocus={handleInputFocus}\n          />\n        </LoginInput>\n        <LoginInput>\n          password:\n          <input\n            type=\"password\"\n            value={password}\n            onChange={handlePasswordChange}\n            onFocus={handleInputFocus}\n          />\n        </LoginInput>\n        <LoginSubmit>\n          {isLoading ? (\n            <SubmitLoading>資料驗證中...</SubmitLoading>\n          ) : (\n            <>\n              <LinkToRegister to=\"/register\">建立帳號</LinkToRegister>\n              <button>登入</button>\n            </>\n          )}\n        </LoginSubmit>\n      </LoginForm>\n    </LoginWrapper>\n  );\n}\n","import React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { register, getMe } from \"../../WebAPI\";\nimport { setAuthToken } from \"../../utils\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { AuthContext } from \"../../contexts\";\nimport { LoadingContext } from \"../../contexts\";\n\nconst RegisterWrapper = styled.div`\n  height: 100vh;\n`;\n\nconst RegisterForm = styled.form`\n  max-width: 450px;\n  margin: 120px auto;\n  padding: 30px 50px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n  font-size: 18px;\n`;\n\nconst RegisterTitle = styled.div`\n  font-size: 28px;\n  font-weight: 700;\n  margin-bottom: 28px;\n  text-align: center;\n`;\n\nconst RegisterInput = styled.div`\n  margin-bottom: 28px;\n\n  & input {\n    width: 100%;\n    padding: 8px;\n    font-size: 18px;\n    outline: transparent;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    letter-spacing: 1.5px;\n    margin-top: 8px;\n  }\n`;\n\nconst RegisterSubmit = styled.div`\n  display: flex;\n  justify-content: space-evenly;\n\n  & button {\n    background: #555;\n    color: #eee;\n    outline: transparent;\n  }\n\n  & button,\n  a {\n    cursor: pointer;\n    border-radius: 20px;\n    font-size: 18px;\n    padding: 6px 20px;\n    border: 1px solid #555;\n  }\n`;\n\nconst LinkToLogin = styled(Link)`\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  background: #eee;\n  color: #555;\n`;\n\nconst ErrorMessage = styled.div`\n  margin-bottom: 16px;\n  color: #db4c3f;\n  font-weight: 700;\n`;\n\nconst SubmitLoading = styled.div`\n  font-weight: 700;\n  color: #555;\n  padding: 10px;\n`;\n\nexport default function RegisterPage() {\n  const { isLoading, setIsLoading } = useContext(LoadingContext);\n  const { setUser } = useContext(AuthContext);\n  // 在 React 中 value 若是 undefined，等同於沒有傳 value\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [nickname, setNickname] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  // 阻止送出表單\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    register({ username, password, nickname }).then((data) => {\n      // 若 ok 為 0 代表錯誤\n      if (data.ok === 0) {\n        setIsLoading(false);\n        return setErrorMessage(data.message);\n      }\n      // 成功的話就把 token 存到 localStorage\n      setAuthToken(data.token);\n\n      getMe().then((response) => {\n        if (response.ok !== 1) {\n          setIsLoading(false);\n          // 在 getMe() 出錯代表還沒成功登入，因此要把 token 清空\n          setAuthToken(null);\n          setErrorMessage(response.toString());\n        }\n        setUser(response.data);\n        // 並導回首頁\n        history.push(\"/\");\n      });\n    });\n  };\n\n  const handleInputFocus = () => {\n    setErrorMessage(null);\n  };\n\n  const handleNicknameChange = (e) => {\n    setNickname(e.target.value);\n  };\n\n  const handleUsernameChange = (e) => {\n    setUsername(e.target.value);\n  };\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  return (\n    <RegisterWrapper>\n      <RegisterForm onSubmit={handleSubmit}>\n        <RegisterTitle>註冊</RegisterTitle>\n        {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n        <RegisterInput>\n          nickname:\n          <input\n            value={nickname}\n            onChange={handleNicknameChange}\n            onFocus={handleInputFocus}\n          />\n        </RegisterInput>\n        <RegisterInput>\n          username:\n          <input\n            value={username}\n            onChange={handleUsernameChange}\n            onFocus={handleInputFocus}\n          />\n        </RegisterInput>\n        <RegisterInput>\n          password:\n          <input\n            type=\"password\"\n            value={password}\n            onChange={handlePasswordChange}\n            onFocus={handleInputFocus}\n          />\n        </RegisterInput>\n        <RegisterSubmit>\n          {isLoading ? (\n            <SubmitLoading>資料驗證中...</SubmitLoading>\n          ) : (\n            <>\n              <LinkToLogin to=\"/login\">已有帳號</LinkToLogin>\n              <button>註冊</button>\n            </>\n          )}\n        </RegisterSubmit>\n      </RegisterForm>\n    </RegisterWrapper>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { MEDIA_QUERY } from \"../../constants/style\";\n\nconst AboutWrapper = styled.div`\n  height: 100vh;\n\n  ${MEDIA_QUERY} {\n    padding: 30px;\n  }\n`;\n\nconst AboutContainter = styled.div`\n  max-width: 550px;\n  margin: 140px auto;\n  padding: 40px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n`;\n\nconst AboutTitle = styled.h2`\n  text-align: center;\n  font-size: 28px;\n  font-weight: 700;\n  margin-bottom: 20px;\n`;\n\nconst AboutContent = styled.div`\n  line-height: 1.5;\n  font-size: 20px;\n\n  b {\n    font-weight: 700;\n  }\n`;\n\nexport default function AboutPage() {\n  return (\n    <AboutWrapper>\n      <AboutContainter>\n        <AboutTitle>關於我</AboutTitle>\n        <AboutContent>\n          <p>\n            嗨，我是\n            Heidi，和阿爾卑斯山上的海蒂同名，夢想是走遍世界各處，留下自己的腳印。\n          </p>\n          <p>\n            因緣際會之下，從 2020 年 3 月開始學習寫程式，目前是 Lidemy\n            程式導師計畫第四期的學生，目標在明年初成功轉職成為一名前端工程師。\n          </p>\n          <br />\n          <p>\n            <b>※ 部落格僅供測試用，所有帳號的密碼均為 Lidemy</b>\n          </p>\n        </AboutContent>\n      </AboutContainter>\n    </AboutWrapper>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\n\nimport { getLimitPosts } from \"../../WebAPI\";\n\nconst Root = styled.div``;\n\nconst PaginationContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  padding: 8px;\n  margin-top: 16px;\n`;\n\nconst PageButton = styled.button`\n  border: 1px solid #555;\n  border-radius: 50%;\n  padding: 8px 12px;\n  font-size: 16px;\n  outline: transparent;\n  cursor: pointer;\n  margin-right: 4px;\n\n  background: ${(props) =>\n    props.className === \"selected\"\n      ? \"rgba(0, 0, 0, 0.5)\"\n      : \"rgba(0, 0, 0, 0.1)\"};\n  color: ${(props) =>\n    props.className === \"selected\" ? \"#eee\" : \"rgba(0, 0, 0, 0.5)\"};\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.5);\n    color: #eee;\n  }\n`;\n\nexport default function Pagination({\n  setPosts,\n  limit,\n  totalPages,\n  currentPage,\n  setCurrentPage,\n}) {\n  const handlePageClick = (page) => {\n    getLimitPosts(page, limit).then((posts) => setPosts(posts));\n    setCurrentPage(page);\n  };\n\n  return (\n    <Root>\n      <PaginationContainer>\n        {totalPages.current &&\n          totalPages.current.map((page) => (\n            <PageButton\n              key={page}\n              onClick={() => handlePageClick(page)}\n              className={currentPage === page ? \"selected\" : \"\"}\n            >\n              {page}\n            </PageButton>\n          ))}\n      </PaginationContainer>\n    </Root>\n  );\n}\n\nPagination.propTypes = {\n  setPosts: PropTypes.func,\n  limit: PropTypes.number,\n  totalPages: PropTypes.object,\n  currentPage: PropTypes.number,\n  setCurrentPage: PropTypes.func,\n};\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\n\nimport { MEDIA_QUERY } from \"../../constants/style\";\nimport { getPosts, getLimitPosts, deletePost } from \"../../WebAPI\";\nimport { getPages } from \"../../utils\";\nimport Pagination from \"../../components/Pagination\";\nimport { LoadingContext, AuthContext } from \"../../contexts\";\nimport Loading from \"../../components/Loading\";\n\nconst PostListWrapper = styled.div`\n  min-height: 100vh;\n  padding: 100px 30px;\n\n  ${MEDIA_QUERY} {\n    padding: 30px;\n  }\n`;\n\nconst PostsListContainer = styled.div`\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 40px 60px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 10px;\n  background: rgba(246, 246, 246, 0.9);\n`;\n\nconst PostsListTitle = styled.div`\n  text-align: center;\n  font-size: 30px;\n  font-weight: 700;\n  color: #333;\n`;\n\nconst PostContainer = styled.div`\n  border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n  padding: 30px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 700;\n\n  ${MEDIA_QUERY} {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n`;\n\nconst PostTitle = styled(Link)`\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n\n  ${MEDIA_QUERY} {\n    margin-bottom: 8px;\n  }\n`;\n\nconst PostRight = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.5);\n  margin-left: 8px;\n`;\n\nconst PostDeleteButton = styled.button`\n  color: white;\n  background-color: #db4c3f;\n  border: 1px solid transparent;\n  border-radius: 20px;\n  font-size: 14px;\n  width: 46px;\n  height: 26px;\n  cursor: pointer;\n`;\n\nfunction PostList({ post, handleDeletePost }) {\n  const { user } = useContext(AuthContext);\n\n  return (\n    <PostContainer>\n      <PostTitle to={`/post/${post.id}`}>\n        [#{post.id}] {post.title}\n      </PostTitle>\n      <PostRight>\n        {user && user.id === post.userId && (\n          <PostDeleteButton\n            onClick={() => {\n              handleDeletePost(post.id);\n            }}\n          >\n            刪除\n          </PostDeleteButton>\n        )}\n        <PostDate>{new Date(post.createdAt).toLocaleDateString()}</PostDate>\n      </PostRight>\n    </PostContainer>\n  );\n}\n\nPostList.propTypes = {\n  post: PropTypes.object,\n  handleDeletePost: PropTypes.func,\n};\n\nexport default function PostListPage() {\n  const { isLoading, setIsLoading } = useContext(LoadingContext);\n\n  const [posts, setPosts] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const totalPages = useRef();\n  const limit = 5;\n\n  useEffect(() => {\n    setIsLoading(true);\n    getPosts().then((posts) => {\n      // 讀取留言來計算總頁數\n      totalPages.current = getPages(Math.ceil(posts.length / limit));\n      // 讀取第一頁文章\n      getLimitPosts(1, limit)\n        .then((posts) => setPosts(posts))\n        .then(() => {\n          setIsLoading(false);\n        });\n    });\n  }, [setIsLoading]);\n\n  const handleDeletePost = (id) => {\n    setIsLoading(true);\n    deletePost(id)\n      .then(() => {\n        // 刪除後重新讀取第一頁文章\n        getLimitPosts(1, limit).then((posts) => setPosts(posts));\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .then(setIsLoading(false));\n  };\n\n  return (\n    <PostListWrapper>\n      {isLoading ? (\n        <Loading />\n      ) : (\n        <PostsListContainer>\n          <PostsListTitle>文章列表</PostsListTitle>\n          {posts.map((post) => (\n            <PostList\n              post={post}\n              key={post.id}\n              handleDeletePost={handleDeletePost}\n            />\n          ))}\n          <Pagination\n            totalPages={totalPages}\n            limit={limit}\n            setPosts={setPosts}\n            currentPage={currentPage}\n            setCurrentPage={setCurrentPage}\n          />\n        </PostsListContainer>\n      )}\n    </PostListWrapper>\n  );\n}\n","import React, { useState, useEffect, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { useParams } from \"react-router-dom\";\n\nimport { MEDIA_QUERY } from \"../../constants/style\";\nimport { getPost } from \"../../WebAPI\";\nimport { LoadingContext } from \"../../contexts\";\nimport Loading from \"../../components/Loading\";\n\nconst PostWrapper = styled.div`\n  min-height: 100vh;\n  padding: 80px 60px;\n\n  ${MEDIA_QUERY} {\n    padding: 40px 20px;\n  }\n`;\n\nconst PostContainer = styled.div`\n  padding: 60px;\n  max-width: 900px;\n  margin: 0px auto;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n\n  ${MEDIA_QUERY} {\n    padding: 40px;\n  }\n`;\n\nconst PostTitle = styled.div`\n  font-size: 36px;\n  font-weight: 700;\n`;\n\nconst PostHeader = styled.div`\n  margin: 16px 0;\n  padding: 8px 0;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  font-size: 16px;\n  color: rgba(0, 0, 0, 0.4);\n\n  & div {\n    margin-top: 8px;\n  }\n`;\n\nconst PostAuthor = styled.div``;\n\nconst PostDate = styled.div``;\n\nconst PostBody = styled.div`\n  font-size: 20px;\n  letter-spacing: 3px;\n  line-height: 1.5;\n  word-break: break-all;\n  white-space: pre-line;\n`;\n\nexport default function PostPage() {\n  const { isLoading, setIsLoading } = useContext(LoadingContext);\n  const [post, setPost] = useState(null);\n  const { id } = useParams();\n\n  useEffect(() => {\n    setIsLoading(true);\n    getPost(id)\n      .then((post) => setPost(post[0]))\n      .then(() => setIsLoading(false));\n  }, [setIsLoading]);\n\n  return (\n    <PostWrapper>\n      {isLoading ? (\n        <Loading />\n      ) : (\n        <PostContainer>\n          {/* post &&: 確認陣列裡面有東西才會執行 */}\n          <PostTitle>{post && post.title}</PostTitle>\n          <PostHeader>\n            <PostAuthor>作者：{post && post.user.username}</PostAuthor>\n            <PostDate>\n              時間：{post && new Date(post.createdAt).toLocaleString()}\n            </PostDate>\n          </PostHeader>\n          <PostBody>{post && post.body}</PostBody>\n        </PostContainer>\n      )}\n    </PostWrapper>\n  );\n}\n","import React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { MEDIA_QUERY } from \"../../constants/style\";\nimport { addNewPost } from \"../../WebAPI\";\nimport { LoadingContext } from \"../../contexts\";\n\nconst NewPostWrapper = styled.div`\n  height: 100vh;\n  padding: 80px 60px;\n\n  ${MEDIA_QUERY} {\n    padding: 50px 20px;\n  }\n`;\n\nconst NewPostForm = styled.form`\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 40px 60px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 10px;\n  background: rgba(246, 246, 246, 0.9);\n  font-size: 18px;\n\n  ${MEDIA_QUERY} {\n    padding: 20px 30px;\n  }\n`;\nconst NewPostLable = styled.div`\n  margin: 10px 0;\n  font-size: 20px;\n`;\n\nconst NewPostTitleInput = styled.input`\n  width: 100%;\n  padding: 8px;\n  font-size: 18px;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n  letter-spacing: 1.5px;\n`;\n\nconst NewPostTextArea = styled.textarea`\n  width: 100%;\n  padding: 8px;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n  font-size: 18px;\n  letter-spacing: 1.5px;\n`;\n\nconst NewPostSubmit = styled.div`\n  margin-top: 16px;\n  text-align: center;\n\n  button {\n    color: #ddd;\n    background-color: #343a40;\n    border-radius: 4px;\n    font-size: 16px;\n    padding: 6px 16px;\n    cursor: pointer;\n    border-radius: 20px;\n    border: 1px solid #555;\n    outline: transparent;\n  }\n`;\n\nconst ErrorMessage = styled.div`\n  color: #db4c3f;\n  font-weight: 700;\n`;\n\nconst NewPostLoading = styled.div`\n  font-weight: 700;\n  color: #555;\n  padding: 9px;\n`;\n\nexport default function NewPostPage() {\n  const { isLoading, setIsLoading } = useContext(LoadingContext);\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  const handleTitleChange = (e) => {\n    setTitle(e.target.value);\n  };\n\n  const handleBodyChange = (e) => {\n    setBody(e.target.value);\n  };\n\n  const handleInputFocus = () => {\n    setErrorMessage(null);\n  };\n\n  const handleTextareaFocus = () => {\n    setErrorMessage(null);\n  };\n\n  const handleNewPostSubmit = (e) => {\n    // 阻止預設的表單發送行為\n    e.preventDefault();\n    setIsLoading(true);\n    addNewPost(title, body)\n      .then((data) => {\n        setIsLoading(false);\n        if (data.ok === 0) {\n          setErrorMessage(data.message);\n          return;\n        }\n        history.push(\"/\");\n      })\n      .catch((err) => {\n        setErrorMessage(err.message);\n      });\n  };\n\n  return (\n    <NewPostWrapper>\n      <NewPostForm onSubmit={handleNewPostSubmit}>\n        {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n        <NewPostLable>文章標題</NewPostLable>\n        <NewPostTitleInput\n          value={title}\n          onChange={handleTitleChange}\n          onFocus={handleInputFocus}\n        />\n        <NewPostLable>文章內容</NewPostLable>\n        <NewPostTextArea\n          value={body}\n          onChange={handleBodyChange}\n          onFocus={handleTextareaFocus}\n          rows={14}\n        />\n        <NewPostSubmit>\n          {isLoading ? (\n            <NewPostLoading>發布中...</NewPostLoading>\n          ) : (\n            <button>發布</button>\n          )}\n        </NewPostSubmit>\n      </NewPostForm>\n    </NewPostWrapper>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\n// 引入使用 CSS Reset\nimport { Reset } from \"styled-reset\";\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport { AuthContext, LoadingContext } from \"../../contexts\";\nimport { getMe } from \"../../WebAPI\";\nimport {\n  getAuthToken,\n  ScrollToTop,\n  ClickTop,\n  scrollToAnchor,\n} from \"../../utils\";\nimport Header from \"../Header\";\nimport Footer from \"../Footer\";\nimport {\n  HomePage,\n  NewPostPage,\n  AboutPage,\n  PostListPage,\n  PostPage,\n  RegisterPage,\n  LoginPage,\n} from \"../../pages\";\n\nexport default function App() {\n  const [isLoadingGetMe, setLoadingGetMe] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  // user 有東西就代表有登入\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    // 以 getAuthToken 從 localStorage 讀取 token\n    if (getAuthToken()) {\n      // 有 token 才 call API\n      getMe().then((response) => {\n        if (response.ok) {\n          setUser(response.data);\n          setLoadingGetMe(false);\n        }\n      });\n    } else {\n      setLoadingGetMe(false);\n    }\n  }, []);\n\n  return (\n    <AuthContext.Provider value={{ user, setUser }}>\n      <Reset />\n      <LoadingContext.Provider\n        value={{ isLoading, setIsLoading, isLoadingGetMe }}\n      >\n        {/* Router: 包在最外層 */}\n        <Router>\n          {/* 路徑改變自動到 TOP */}\n          <ScrollToTop />\n          <ClickTop onClick={() => scrollToAnchor(\"page-top\")}>\n            <span>TOP</span>\n          </ClickTop>\n          <Header />\n          {/* Switch: 確保匹配第一個符合網址列的路由 */}\n          <Switch>\n            {/* exact path: 完整匹配 */}\n            <Route exact path=\"/\">\n              <HomePage />\n            </Route>\n            <Route exact path=\"/about\">\n              <AboutPage />\n            </Route>\n            <Route exact path=\"/post-list/\">\n              <PostListPage />\n            </Route>\n            <Route exact path=\"/post/:id\">\n              <PostPage />\n            </Route>\n            <Route exact path=\"/new-post\">\n              <NewPostPage />\n            </Route>\n            <Route exact path=\"/register\">\n              <RegisterPage />\n            </Route>\n            <Route exact path=\"/login\">\n              <LoginPage />\n            </Route>\n          </Switch>\n          <Footer />\n        </Router>\n      </LoadingContext.Provider>\n    </AuthContext.Provider>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}