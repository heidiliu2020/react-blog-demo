(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{67:function(n,t,e){},68:function(n,t,e){"use strict";e.r(t);var r=e(1),c=e(0),i=e(26),o=e.n(i),a=e(4),u=e(27),s=e(9),d=e(7),b=Object(c.createContext)(null),j=Object(c.createContext)(null),x=e(3),p=e(2);function l(){var n=Object(x.a)(["\n  cursor: pointer;\n  padding: 4px 8px;\n  font-size: 14px;\n  position: fixed;\n  bottom: 5%;\n  right: 5%;\n  color: #eee;\n  background: #222;\n  z-index: 5;\n  opacity: 0.6;\n  :hover {\n    opacity: 0.9;\n  }\n"]);return l=function(){return n},n}var f="token",h=function(n){localStorage.setItem(f,n)},O=function(){return localStorage.getItem(f)};function g(){var n=Object(d.g)().pathname;return Object(c.useEffect)((function(){window.scrollTo(0,0)}),[n]),null}var v=p.c.div(l()),m="https://student-json-api.lidemy.me",w=function(n,t){return fetch("".concat(m,"/posts?_page=").concat(n,"&_limit=").concat(t,"&_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},y=function(){var n=O();return fetch("".concat(m,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},k="@media screen and (max-width: 768px)";function z(){var n=Object(x.a)(["\n  height: 58px;\n  width: 164px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #666;\n"]);return z=function(){return n},n}function C(){var n=Object(x.a)(["\n  height: 58px;\n  width: 82px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-decoration: none;\n  color: #666;\n\n  /* activeClassName: \u8a2d\u7f6e\u9078\u4e2d\u6a23\u5f0f\uff0c\u9810\u8a2d\u70ba active */\n  &."," {\n    background: #eee;\n  }\n\n  "," {\n    font-size: 18px;\n    height: 32px;\n\n    &."," {\n      background: #fff;\n      color: #999;\n    }\n  }\n"]);return C=function(){return n},n}function S(){var n=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  list-style-type: none;\n  text-decoration: none;\n  margin: 0;\n  padding: 0;\n\n  "," {\n    font-size: 24px;\n    justify-content: space-evenly;\n  }\n"]);return S=function(){return n},n}function L(){var n=Object(x.a)(["\n  font-size: 28px;\n  white-space: nowrap;\n  font-weight: 700;\n\n  /* \u53ef\u9078\u53d6\u5b50\u5c64\u7684 Link \u5143\u7d20 */\n  a {\n    text-decoration: none;\n    color: #333;\n    padding: 8px;\n  }\n\n  "," {\n    font-size: 24px;\n    padding: 6px 0;\n  }\n"]);return L=function(){return n},n}function P(){var n=Object(x.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  box-shadow: 0px 0px 8px rgb(199, 197, 197);\n  padding: 0 32px;\n  background: #fff;\n\n  "," {\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n  }\n"]);return P=function(){return n},n}var N=p.c.div(P(),k),I=p.c.div(L(),k),D=p.c.ul(S(),k),E=Object(p.c)(s.c)(C(),(function(n){return n.activeClassName}),k,(function(n){return n.activeClassName})),F=p.c.div(z());function _(){var n=Object(c.useContext)(j).isLoadingGetMe,t=Object(c.useContext)(b),e=t.user,i=t.setUser,o=Object(d.g)(),a=Object(d.f)();return Object(r.jsxs)(N,{id:"page-top",children:[Object(r.jsx)(I,{children:Object(r.jsx)(s.b,{to:"/",replace:!0,children:"Heidi's Blog"})}),Object(r.jsxs)(D,{children:[Object(r.jsx)(E,{exact:!0,to:"/about",replace:!0,activeClassName:"active",children:"\u95dc\u65bc\u6211"}),Object(r.jsx)(E,{to:"/post-list/",replace:!0,activeClassName:"active",children:"\u6587\u7ae0\u5217\u8868"}),n?Object(r.jsx)(F,{children:"\u8cc7\u6599\u8b80\u53d6\u4e2d..."}):Object(r.jsxs)(r.Fragment,{children:[!e&&Object(r.jsx)(E,{to:"/register",replace:!0,activeClassName:"active",children:"\u8a3b\u518a"}),!e&&Object(r.jsx)(E,{to:"/login",replace:!0,activeClassName:"active",children:"\u767b\u5165"}),e&&Object(r.jsx)(E,{to:"/new-post",replace:!0,activeClassName:"active",children:"\u767c\u5e03\u6587\u7ae0"}),e&&Object(r.jsx)(E,{to:"",replace:!0,onClick:function(){h(""),i(null),"/"!==o.pathname&&a.push("/")},children:"\u767b\u51fa"})]})]})]})}function A(){var n=Object(x.a)(["\n  text-align: center;\n  padding: 6px;\n  letter-spacing: 1px;\n  background: #000;\n  color: #eee;\n\n  & a {\n    text-decoration: none;\n    color: #338ccc;\n  }\n  & a:hover {\n    color: #eee;\n  }\n"]);return A=function(){return n},n}var T=p.c.div(A());function B(){return Object(r.jsxs)(T,{children:["\xa9 2020"," ",Object(r.jsx)("a",{href:"https://github.com/heidiliu2020",rel:"noreferrer",target:"_blank",children:"Heidi"})," \u2665 ","Powered by React"]})}var J=e(29);function U(){var n=Object(x.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return U=function(){return n},n}var H=p.c.div(U());function M(){return Object(r.jsx)(H,{children:Object(r.jsx)(J.PuffLoader,{size:60,color:"#4A90E2"})})}function G(){var n=Object(x.a)(["\n  margin-top: 24px;\n  text-align: center;\n\n  a {\n    border-radius: 30px;\n    font-size: 16px;\n    padding: 8px 10px;\n    border: 1px solid #555;\n    background: #555;\n    color: #eee;\n    text-decoration: none;\n  }\n"]);return G=function(){return n},n}function R(){var n=Object(x.a)(["\n  font-size: 20px;\n  letter-spacing: 3px;\n  line-height: 1.5;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 550px;\n  max-height: 100px;\n"]);return R=function(){return n},n}function V(){var n=Object(x.a)(["\n  color: rgba(0, 0, 0, 0.5);\n"]);return V=function(){return n},n}function q(){var n=Object(x.a)(["\n  font-size: 24px;\n  font-weight: 700;\n  color: #333;\n  text-decoration: none;\n"]);return q=function(){return n},n}function K(){var n=Object(x.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n"]);return K=function(){return n},n}function Q(){var n=Object(x.a)(["\n  border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n  padding: 20px 0;\n\n  "," {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n"]);return Q=function(){return n},n}function W(){var n=Object(x.a)(["\n  text-align: center;\n  font-size: 30px;\n  font-weight: 700;\n  color: #333;\n"]);return W=function(){return n},n}function X(){var n=Object(x.a)(["\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 40px 60px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 10px;\n  background: rgba(246, 246, 246, 0.9);\n\n  "," {\n    margin: 30px auto;\n    padding: 30px;\n  }\n"]);return X=function(){return n},n}function Y(){var n=Object(x.a)(["\n  min-height: 100vh;\n  padding: 100px 30px;\n\n  "," {\n    padding: 30px;\n  }\n"]);return Y=function(){return n},n}var Z=p.c.div(Y(),k),$=p.c.div(X(),k),nn=p.c.div(W()),tn=p.c.div(Q(),k),en=p.c.div(K()),rn=Object(p.c)(s.b)(q()),cn=p.c.div(V()),on=p.c.div(R()),an=p.c.div(G());function un(n){var t=n.post;return Object(r.jsxs)(tn,{children:[Object(r.jsxs)(en,{children:[Object(r.jsxs)(rn,{to:"/post/".concat(t.id),children:["[#",t.id,"] ",t.title]}),Object(r.jsx)(cn,{children:new Date(t.createdAt).toLocaleDateString()})]}),Object(r.jsx)(on,{children:t.body})]})}function sn(){var n=Object(c.useContext)(j),t=n.isLoading,e=n.setIsLoading,i=Object(c.useState)([]),o=Object(a.a)(i,2),u=o[0],d=o[1];return Object(c.useEffect)((function(){e(!0),w(1,5).then((function(n){return d(n)})).then((function(){e(!1)}))}),[e]),Object(r.jsx)(Z,{children:t?Object(r.jsx)(M,{}):Object(r.jsxs)($,{children:[Object(r.jsx)(nn,{children:"\u6700\u65b0\u6587\u7ae0"}),u&&u.map((function(n){return Object(r.jsx)(un,{post:n},n.id)})),Object(r.jsx)(an,{children:Object(r.jsx)(s.b,{to:"/post-list",children:"\u67e5\u770b\u66f4\u591a"})})]})})}function dn(){var n=Object(x.a)(["\n  font-weight: 700;\n  color: #555;\n  padding: 10px;\n"]);return dn=function(){return n},n}function bn(){var n=Object(x.a)(["\n  margin-bottom: 16px;\n  color: #db4c3f;\n  font-weight: 700;\n"]);return bn=function(){return n},n}function jn(){var n=Object(x.a)(["\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  background: #eee;\n  color: #555;\n"]);return jn=function(){return n},n}function xn(){var n=Object(x.a)(["\n  display: flex;\n  justify-content: space-evenly;\n\n  & button {\n    background: #555;\n    color: #eee;\n    outline: transparent;\n  }\n\n  & button,\n  a {\n    cursor: pointer;\n    border-radius: 20px;\n    font-size: 18px;\n    padding: 6px 20px;\n    border: 1px solid #555;\n  }\n"]);return xn=function(){return n},n}function pn(){var n=Object(x.a)(["\n  margin-bottom: 28px;\n\n  & input {\n    width: 100%;\n    padding: 8px;\n    font-size: 18px;\n    outline: transparent;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    letter-spacing: 1.5px;\n    margin-top: 8px;\n  }\n"]);return pn=function(){return n},n}function ln(){var n=Object(x.a)(["\n  font-size: 28px;\n  font-weight: 700;\n  margin-bottom: 28px;\n  text-align: center;\n"]);return ln=function(){return n},n}function fn(){var n=Object(x.a)(["\n  max-width: 450px;\n  margin: 120px auto;\n  padding: 30px 50px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n  font-size: 18px;\n"]);return fn=function(){return n},n}function hn(){var n=Object(x.a)(["\n  height: 100vh;\n"]);return hn=function(){return n},n}var On=p.c.div(hn()),gn=p.c.form(fn()),vn=p.c.div(ln()),mn=p.c.div(pn()),wn=p.c.div(xn()),yn=Object(p.c)(s.b)(jn()),kn=p.c.div(bn()),zn=p.c.div(dn());function Cn(){var n=Object(c.useContext)(j),t=n.isLoading,e=n.setIsLoading,i=Object(c.useContext)(b).setUser,o=Object(c.useState)(""),u=Object(a.a)(o,2),s=u[0],x=u[1],p=Object(c.useState)(""),l=Object(a.a)(p,2),f=l[0],O=l[1],g=Object(c.useState)(),v=Object(a.a)(g,2),w=v[0],k=v[1],z=Object(d.f)(),C=function(){k(null)};return Object(r.jsx)(On,{children:Object(r.jsxs)(gn,{onSubmit:function(n){n.preventDefault(),e(!0),function(n){var t=n.username,e=n.password;return fetch("".concat(m,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:e})}).then((function(n){return n.json()}))}({username:s,password:f}).then((function(n){if(0===n.ok)return e(!1),k(n.message);h(n.token),y().then((function(n){1!==n.ok&&(e(!1),h(null),k(n.toString())),i(n.data),z.push("/")}))}))},children:[Object(r.jsx)(vn,{children:"\u767b\u5165"}),w&&Object(r.jsx)(kn,{children:w}),Object(r.jsxs)(mn,{children:["username:",Object(r.jsx)("input",{value:s,onChange:function(n){x(n.target.value)},onFocus:C})]}),Object(r.jsxs)(mn,{children:["password:",Object(r.jsx)("input",{type:"password",value:f,onChange:function(n){O(n.target.value)},onFocus:C})]}),Object(r.jsx)(wn,{children:t?Object(r.jsx)(zn,{children:"\u8cc7\u6599\u9a57\u8b49\u4e2d..."}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(yn,{to:"/register",children:"\u5efa\u7acb\u5e33\u865f"}),Object(r.jsx)("button",{children:"\u767b\u5165"})]})})]})})}function Sn(){var n=Object(x.a)(["\n  font-weight: 700;\n  color: #555;\n  padding: 10px;\n"]);return Sn=function(){return n},n}function Ln(){var n=Object(x.a)(["\n  margin-bottom: 16px;\n  color: #db4c3f;\n  font-weight: 700;\n"]);return Ln=function(){return n},n}function Pn(){var n=Object(x.a)(["\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  background: #eee;\n  color: #555;\n"]);return Pn=function(){return n},n}function Nn(){var n=Object(x.a)(["\n  display: flex;\n  justify-content: space-evenly;\n\n  & button {\n    background: #555;\n    color: #eee;\n    outline: transparent;\n  }\n\n  & button,\n  a {\n    cursor: pointer;\n    border-radius: 20px;\n    font-size: 18px;\n    padding: 6px 20px;\n    border: 1px solid #555;\n  }\n"]);return Nn=function(){return n},n}function In(){var n=Object(x.a)(["\n  margin-bottom: 28px;\n\n  & input {\n    width: 100%;\n    padding: 8px;\n    font-size: 18px;\n    outline: transparent;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    letter-spacing: 1.5px;\n    margin-top: 8px;\n  }\n"]);return In=function(){return n},n}function Dn(){var n=Object(x.a)(["\n  font-size: 28px;\n  font-weight: 700;\n  margin-bottom: 28px;\n  text-align: center;\n"]);return Dn=function(){return n},n}function En(){var n=Object(x.a)(["\n  max-width: 450px;\n  margin: 120px auto;\n  padding: 30px 50px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n  font-size: 18px;\n"]);return En=function(){return n},n}function Fn(){var n=Object(x.a)(["\n  height: 100vh;\n"]);return Fn=function(){return n},n}var _n=p.c.div(Fn()),An=p.c.form(En()),Tn=p.c.div(Dn()),Bn=p.c.div(In()),Jn=p.c.div(Nn()),Un=Object(p.c)(s.b)(Pn()),Hn=p.c.div(Ln()),Mn=p.c.div(Sn());function Gn(){var n=Object(c.useContext)(j),t=n.isLoading,e=n.setIsLoading,i=Object(c.useContext)(b).setUser,o=Object(c.useState)(""),u=Object(a.a)(o,2),s=u[0],x=u[1],p=Object(c.useState)(""),l=Object(a.a)(p,2),f=l[0],O=l[1],g=Object(c.useState)(""),v=Object(a.a)(g,2),w=v[0],k=v[1],z=Object(c.useState)(),C=Object(a.a)(z,2),S=C[0],L=C[1],P=Object(d.f)(),N=function(){L(null)};return Object(r.jsx)(_n,{children:Object(r.jsxs)(An,{onSubmit:function(n){n.preventDefault(),e(!0),function(n){var t=n.username,e=n.password,r=n.nickname;return fetch("".concat(m,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:r,username:t,password:e})}).then((function(n){return n.json()}))}({username:s,password:f,nickname:w}).then((function(n){if(0===n.ok)return e(!1),L(n.message);h(n.token),y().then((function(n){1!==n.ok&&(e(!1),h(null),L(n.toString())),i(n.data),P.push("/")}))}))},children:[Object(r.jsx)(Tn,{children:"\u8a3b\u518a"}),S&&Object(r.jsx)(Hn,{children:S}),Object(r.jsxs)(Bn,{children:["nickname:",Object(r.jsx)("input",{value:w,onChange:function(n){k(n.target.value)},onFocus:N})]}),Object(r.jsxs)(Bn,{children:["username:",Object(r.jsx)("input",{value:s,onChange:function(n){x(n.target.value)},onFocus:N})]}),Object(r.jsxs)(Bn,{children:["password:",Object(r.jsx)("input",{type:"password",value:f,onChange:function(n){O(n.target.value)},onFocus:N})]}),Object(r.jsx)(Jn,{children:t?Object(r.jsx)(Mn,{children:"\u8cc7\u6599\u9a57\u8b49\u4e2d..."}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Un,{to:"/login",children:"\u5df2\u6709\u5e33\u865f"}),Object(r.jsx)("button",{children:"\u8a3b\u518a"})]})})]})})}function Rn(){var n=Object(x.a)(["\n  line-height: 1.5;\n  font-size: 20px;\n\n  b {\n    font-weight: 700;\n  }\n"]);return Rn=function(){return n},n}function Vn(){var n=Object(x.a)(["\n  text-align: center;\n  font-size: 28px;\n  font-weight: 700;\n  margin-bottom: 20px;\n"]);return Vn=function(){return n},n}function qn(){var n=Object(x.a)(["\n  max-width: 550px;\n  margin: 140px auto;\n  padding: 40px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n"]);return qn=function(){return n},n}function Kn(){var n=Object(x.a)(["\n  height: 100vh;\n\n  "," {\n    padding: 30px;\n  }\n"]);return Kn=function(){return n},n}var Qn=p.c.div(Kn(),k),Wn=p.c.div(qn()),Xn=p.c.h2(Vn()),Yn=p.c.div(Rn());function Zn(){return Object(r.jsx)(Qn,{children:Object(r.jsxs)(Wn,{children:[Object(r.jsx)(Xn,{children:"\u95dc\u65bc\u6211"}),Object(r.jsxs)(Yn,{children:[Object(r.jsx)("p",{children:"\u55e8\uff0c\u6211\u662f Heidi\uff0c\u548c\u963f\u723e\u5351\u65af\u5c71\u4e0a\u7684\u6d77\u8482\u540c\u540d\uff0c\u5922\u60f3\u662f\u8d70\u904d\u4e16\u754c\u5404\u8655\uff0c\u7559\u4e0b\u81ea\u5df1\u7684\u8173\u5370\u3002"}),Object(r.jsx)("p",{children:"\u56e0\u7de3\u969b\u6703\u4e4b\u4e0b\uff0c\u5f9e 2020 \u5e74 3 \u6708\u958b\u59cb\u5b78\u7fd2\u5beb\u7a0b\u5f0f\uff0c\u76ee\u524d\u662f Lidemy \u7a0b\u5f0f\u5c0e\u5e2b\u8a08\u756b\u7b2c\u56db\u671f\u7684\u5b78\u751f\uff0c\u76ee\u6a19\u5728\u660e\u5e74\u521d\u6210\u529f\u8f49\u8077\u6210\u70ba\u4e00\u540d\u524d\u7aef\u5de5\u7a0b\u5e2b\u3002"}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:Object(r.jsx)("b",{children:"\u203b \u90e8\u843d\u683c\u50c5\u4f9b\u6e2c\u8a66\u7528\uff0c\u6240\u6709\u5e33\u865f\u7684\u5bc6\u78bc\u5747\u70ba Lidemy"})})]})]})})}function $n(){var n=Object(x.a)(["\n  border: 1px solid #555;\n  border-radius: 50%;\n  padding: 8px 12px;\n  font-size: 16px;\n  outline: transparent;\n  cursor: pointer;\n  margin-right: 4px;\n\n  background: ",";\n  color: ",";\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.5);\n    color: #eee;\n  }\n"]);return $n=function(){return n},n}function nt(){var n=Object(x.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 8px;\n  margin-top: 16px;\n"]);return nt=function(){return n},n}function tt(){var n=Object(x.a)([""]);return tt=function(){return n},n}var et=p.c.div(tt()),rt=p.c.div(nt()),ct=p.c.button($n(),(function(n){return"selected"===n.className?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.1)"}),(function(n){return"selected"===n.className?"#eee":"rgba(0, 0, 0, 0.5)"}));function it(n){var t=n.setPosts,e=n.limit,c=n.totalPages,i=n.currentPage,o=n.setCurrentPage;return Object(r.jsx)(et,{children:Object(r.jsx)(rt,{children:c.current&&c.current.map((function(n){return Object(r.jsx)(ct,{onClick:function(){return function(n){w(n,e).then((function(n){return t(n)})),o(n)}(n)},className:i===n?"selected":"",children:n},n)}))})})}function ot(){var n=Object(x.a)(["\n  color: white;\n  background-color: #db4c3f;\n  border: 1px solid transparent;\n  border-radius: 20px;\n  font-size: 14px;\n  width: 46px;\n  height: 26px;\n  cursor: pointer;\n"]);return ot=function(){return n},n}function at(){var n=Object(x.a)(["\n  color: rgba(0, 0, 0, 0.5);\n  margin-left: 8px;\n"]);return at=function(){return n},n}function ut(){var n=Object(x.a)(["\n  display: flex;\n  align-items: center;\n"]);return ut=function(){return n},n}function st(){var n=Object(x.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n\n  "," {\n    margin-bottom: 8px;\n  }\n"]);return st=function(){return n},n}function dt(){var n=Object(x.a)(["\n  border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n  padding: 30px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 700;\n\n  "," {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n"]);return dt=function(){return n},n}function bt(){var n=Object(x.a)(["\n  text-align: center;\n  font-size: 30px;\n  font-weight: 700;\n  color: #333;\n"]);return bt=function(){return n},n}function jt(){var n=Object(x.a)(["\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 40px 60px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 10px;\n  background: rgba(246, 246, 246, 0.9);\n"]);return jt=function(){return n},n}function xt(){var n=Object(x.a)(["\n  min-height: 100vh;\n  padding: 100px 30px;\n\n  "," {\n    padding: 30px;\n  }\n"]);return xt=function(){return n},n}var pt=p.c.div(xt(),k),lt=p.c.div(jt()),ft=p.c.div(bt()),ht=p.c.div(dt(),k),Ot=Object(p.c)(s.b)(st(),k),gt=p.c.div(ut()),vt=p.c.div(at()),mt=p.c.button(ot());function wt(n){var t=n.post,e=n.handleDeletePost,i=Object(c.useContext)(b).user;return Object(r.jsxs)(ht,{children:[Object(r.jsxs)(Ot,{to:"/post/".concat(t.id),children:["[#",t.id,"] ",t.title]}),Object(r.jsxs)(gt,{children:[i&&i.id===t.userId&&Object(r.jsx)(mt,{onClick:function(){e(t.id)},children:"\u522a\u9664"}),Object(r.jsx)(vt,{children:new Date(t.createdAt).toLocaleDateString()})]})]})}function yt(){var n=Object(c.useContext)(j),t=n.isLoading,e=n.setIsLoading,i=Object(c.useState)([]),o=Object(a.a)(i,2),u=o[0],s=o[1],d=Object(c.useState)(1),b=Object(a.a)(d,2),x=b[0],p=b[1],l=Object(c.useRef)();Object(c.useEffect)((function(){e(!0),fetch("".concat(m,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()})).then((function(n){l.current=function(n){for(var t=[],e=1;e<=n;e++)t.push(e);return t}(Math.ceil(n.length/5)),w(1,5).then((function(n){return s(n)})).then((function(){e(!1)}))}))}),[e]);var f=function(n){e(!0),function(n){return fetch("https://student-json-api.lidemy.me/posts/"+n,{method:"DELETE"}).then((function(n){return n.json()}))}(n).then((function(){w(1,5).then((function(n){return s(n)}))})).catch((function(n){console.log(n)})).then(e(!1))};return Object(r.jsx)(pt,{children:t?Object(r.jsx)(M,{}):Object(r.jsxs)(lt,{children:[Object(r.jsx)(ft,{children:"\u6587\u7ae0\u5217\u8868"}),u.map((function(n){return Object(r.jsx)(wt,{post:n,handleDeletePost:f},n.id)})),Object(r.jsx)(it,{totalPages:l,limit:5,setPosts:s,currentPage:x,setCurrentPage:p})]})})}function kt(){var n=Object(x.a)(["\n  font-size: 20px;\n  letter-spacing: 3px;\n  line-height: 1.5;\n  word-break: break-all;\n  white-space: pre-line;\n"]);return kt=function(){return n},n}function zt(){var n=Object(x.a)([""]);return zt=function(){return n},n}function Ct(){var n=Object(x.a)([""]);return Ct=function(){return n},n}function St(){var n=Object(x.a)(["\n  margin: 16px 0;\n  padding: 8px 0;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  font-size: 16px;\n  color: rgba(0, 0, 0, 0.4);\n\n  & div {\n    margin-top: 8px;\n  }\n"]);return St=function(){return n},n}function Lt(){var n=Object(x.a)(["\n  font-size: 36px;\n  font-weight: 700;\n"]);return Lt=function(){return n},n}function Pt(){var n=Object(x.a)(["\n  padding: 60px;\n  max-width: 900px;\n  margin: 0px auto;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n\n  "," {\n    padding: 40px;\n  }\n"]);return Pt=function(){return n},n}function Nt(){var n=Object(x.a)(["\n  min-height: 100vh;\n  padding: 80px 60px;\n\n  "," {\n    padding: 40px 20px;\n  }\n"]);return Nt=function(){return n},n}var It=p.c.div(Nt(),k),Dt=p.c.div(Pt(),k),Et=p.c.div(Lt()),Ft=p.c.div(St()),_t=p.c.div(Ct()),At=p.c.div(zt()),Tt=p.c.div(kt());function Bt(){var n=Object(c.useContext)(j),t=n.isLoading,e=n.setIsLoading,i=Object(c.useState)(null),o=Object(a.a)(i,2),u=o[0],s=o[1],b=Object(d.h)().id;return Object(c.useEffect)((function(){e(!0),function(n){return fetch("".concat(m,"/posts?id=").concat(n,"&_expand=user")).then((function(n){return n.json()}))}(b).then((function(n){return s(n[0])})).then((function(){return e(!1)}))}),[e]),Object(r.jsx)(It,{children:t?Object(r.jsx)(M,{}):Object(r.jsxs)(Dt,{children:[Object(r.jsx)(Et,{children:u&&u.title}),Object(r.jsxs)(Ft,{children:[Object(r.jsxs)(_t,{children:["\u4f5c\u8005\uff1a",u&&u.user.username]}),Object(r.jsxs)(At,{children:["\u6642\u9593\uff1a",u&&new Date(u.createdAt).toLocaleString()]})]}),Object(r.jsx)(Tt,{children:u&&u.body})]})})}function Jt(){var n=Object(x.a)(["\n  font-weight: 700;\n  color: #555;\n  padding: 9px;\n"]);return Jt=function(){return n},n}function Ut(){var n=Object(x.a)(["\n  color: #db4c3f;\n  font-weight: 700;\n"]);return Ut=function(){return n},n}function Ht(){var n=Object(x.a)(["\n  margin-top: 16px;\n  text-align: center;\n\n  button {\n    color: #ddd;\n    background-color: #343a40;\n    border-radius: 4px;\n    font-size: 16px;\n    padding: 6px 16px;\n    cursor: pointer;\n    border-radius: 20px;\n    border: 1px solid #555;\n    outline: transparent;\n  }\n"]);return Ht=function(){return n},n}function Mt(){var n=Object(x.a)(["\n  width: 100%;\n  padding: 8px;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n  font-size: 18px;\n  letter-spacing: 1.5px;\n"]);return Mt=function(){return n},n}function Gt(){var n=Object(x.a)(["\n  width: 100%;\n  padding: 8px;\n  font-size: 18px;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n  letter-spacing: 1.5px;\n"]);return Gt=function(){return n},n}function Rt(){var n=Object(x.a)(["\n  margin: 10px 0;\n  font-size: 20px;\n"]);return Rt=function(){return n},n}function Vt(){var n=Object(x.a)(["\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 40px 60px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 10px;\n  background: rgba(246, 246, 246, 0.9);\n  font-size: 18px;\n\n  "," {\n    padding: 20px 30px;\n  }\n"]);return Vt=function(){return n},n}function qt(){var n=Object(x.a)(["\n  height: 100vh;\n  padding: 80px 60px;\n\n  "," {\n    padding: 50px 20px;\n  }\n"]);return qt=function(){return n},n}var Kt=p.c.div(qt(),k),Qt=p.c.form(Vt(),k),Wt=p.c.div(Rt()),Xt=p.c.input(Gt()),Yt=p.c.textarea(Mt()),Zt=p.c.div(Ht()),$t=p.c.div(Ut()),ne=p.c.div(Jt());function te(){var n=Object(c.useContext)(j),t=n.isLoading,e=n.setIsLoading,i=Object(c.useState)(""),o=Object(a.a)(i,2),u=o[0],s=o[1],b=Object(c.useState)(""),x=Object(a.a)(b,2),p=x[0],l=x[1],f=Object(c.useState)(),h=Object(a.a)(f,2),g=h[0],v=h[1],w=Object(d.f)();return Object(r.jsx)(Kt,{children:Object(r.jsxs)(Qt,{onSubmit:function(n){n.preventDefault(),e(!0),function(n,t){var e=O();return fetch("".concat(m,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(e),"content-type":"application/json"},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(u,p).then((function(n){e(!1),0!==n.ok?w.push("/"):v(n.message)})).catch((function(n){v(n.message)}))},children:[g&&Object(r.jsx)($t,{children:g}),Object(r.jsx)(Wt,{children:"\u6587\u7ae0\u6a19\u984c"}),Object(r.jsx)(Xt,{value:u,onChange:function(n){s(n.target.value)},onFocus:function(){v(null)}}),Object(r.jsx)(Wt,{children:"\u6587\u7ae0\u5167\u5bb9"}),Object(r.jsx)(Yt,{value:p,onChange:function(n){l(n.target.value)},onFocus:function(){v(null)},rows:14}),Object(r.jsx)(Zt,{children:t?Object(r.jsx)(ne,{children:"\u767c\u5e03\u4e2d..."}):Object(r.jsx)("button",{children:"\u767c\u5e03"})})]})})}function ee(){var n=Object(c.useState)(!0),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(c.useState)(!1),x=Object(a.a)(o,2),p=x[0],l=x[1],f=Object(c.useState)(null),h=Object(a.a)(f,2),m=h[0],w=h[1];return Object(c.useEffect)((function(){O()?y().then((function(n){n.ok&&(w(n.data),i(!1))})):i(!1)}),[]),Object(r.jsxs)(b.Provider,{value:{user:m,setUser:w},children:[Object(r.jsx)(u.a,{}),Object(r.jsx)(j.Provider,{value:{isLoading:p,setIsLoading:l,isLoadingGetMe:e},children:Object(r.jsxs)(s.a,{children:[Object(r.jsx)(g,{}),Object(r.jsx)(v,{onClick:function(){return function(n){if(n){var t=document.getElementById(n);t&&t.scrollIntoView()}}("page-top")},children:Object(r.jsx)("span",{children:"TOP"})}),Object(r.jsx)(_,{}),Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{exact:!0,path:"/",children:Object(r.jsx)(sn,{})}),Object(r.jsx)(d.a,{exact:!0,path:"/about",children:Object(r.jsx)(Zn,{})}),Object(r.jsx)(d.a,{exact:!0,path:"/post-list/",children:Object(r.jsx)(yt,{})}),Object(r.jsx)(d.a,{exact:!0,path:"/post/:id",children:Object(r.jsx)(Bt,{})}),Object(r.jsx)(d.a,{exact:!0,path:"/new-post",children:Object(r.jsx)(te,{})}),Object(r.jsx)(d.a,{exact:!0,path:"/register",children:Object(r.jsx)(Gn,{})}),Object(r.jsx)(d.a,{exact:!0,path:"/login",children:Object(r.jsx)(Cn,{})})]}),Object(r.jsx)(B,{})]})})]})}e(67);o.a.render(Object(r.jsx)(ee,{}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.f1e23647.chunk.js.map