(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{67:function(n,t,e){"use strict";e.r(t);var r=e(1),c=e(0),i=e(26),o=e.n(i),a=e(4),u=e(3),s=e(2),d=e(27),b=e(9),j=e(7),x=Object(c.createContext)(null),p=Object(c.createContext)(null),f="token",l=function(n){localStorage.setItem(f,n)},h=function(){return localStorage.getItem(f)},O="https://student-json-api.lidemy.me",g=function(n,t){return fetch("".concat(O,"/posts?_page=").concat(n,"&_limit=").concat(t,"&_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},v=function(){var n=h();return fetch("".concat(O,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},m=e.p+"static/media/bg.96773744.jpg",w="@media screen and (max-width: 768px)";function y(){var n=Object(u.a)(["\n  height: 58px;\n  width: 82px;\n"]);return y=function(){return n},n}function k(){var n=Object(u.a)(["\n  height: 58px;\n  width: 82px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-decoration: none;\n  color: #666;\n\n  /* activeClassName: \u8a2d\u7f6e\u9078\u4e2d\u6a23\u5f0f\uff0c\u9810\u8a2d\u70ba active */\n  &."," {\n    background: #eee;\n  }\n\n  "," {\n    font-size: 18px;\n    height: 32px;\n\n    &."," {\n      background: #fff;\n      color: #999;\n    }\n  }\n"]);return k=function(){return n},n}function z(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  list-style-type: none;\n  text-decoration: none;\n  margin: 0;\n  padding: 0;\n\n  "," {\n    font-size: 24px;\n    justify-content: space-evenly;\n  }\n"]);return z=function(){return n},n}function S(){var n=Object(u.a)(["\n  font-size: 28px;\n  margin-right: 20px;\n  white-space: nowrap;\n  font-weight: 700;\n\n  /* \u53ef\u9078\u53d6\u5b50\u5c64\u7684 Link \u5143\u7d20 */\n  a {\n    text-decoration: none;\n    color: #333;\n  }\n\n  "," {\n    font-size: 24px;\n    padding: 6px 0;\n  }\n"]);return S=function(){return n},n}function C(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  box-shadow: 0px 0px 8px rgb(199, 197, 197);\n  padding: 0 32px;\n  background: #fff;\n\n  "," {\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n  }\n"]);return C=function(){return n},n}var L=s.c.div(C(),w),P=s.c.div(S(),w),N=s.c.ul(z(),w),D=Object(s.c)(b.c)(k(),(function(n){return n.activeClassName}),w,(function(n){return n.activeClassName})),F=s.c.div(y());function _(){var n=Object(c.useContext)(p).isLoadingGetMe,t=Object(c.useContext)(x),e=t.user,i=t.setUser,o=Object(j.g)(),a=Object(j.f)();return Object(r.jsxs)(L,{children:[Object(r.jsx)(P,{children:Object(r.jsx)(b.b,{to:"/",replace:!0,children:"React \u90e8\u843d\u683c"})}),Object(r.jsxs)(N,{children:[Object(r.jsx)(D,{exact:!0,to:"/about",replace:!0,activeClassName:"active",children:"\u95dc\u65bc\u6211"}),Object(r.jsx)(D,{to:"/post-list/",replace:!0,activeClassName:"active",children:"\u6587\u7ae0\u5217\u8868"}),n?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(F,{}),Object(r.jsx)(F,{})]}):Object(r.jsxs)(r.Fragment,{children:[!e&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(D,{to:"/register",replace:!0,activeClassName:"active",children:"\u8a3b\u518a"}),Object(r.jsx)(D,{to:"/login",replace:!0,activeClassName:"active",children:"\u767b\u5165"})]}),e&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(D,{to:"/new-post",replace:!0,activeClassName:"active",children:"\u767c\u5e03\u6587\u7ae0"}),Object(r.jsx)(D,{to:"",replace:!0,onClick:function(){l(""),i(null),"/"!==o.pathname&&a.push("/")},children:"\u767b\u51fa"})]})," "]})]})]})}function E(){var n=Object(u.a)(["\n  text-align: center;\n  padding: 8px;\n  letter-spacing: 1px;\n  background: #000;\n  color: #eee;\n"]);return E=function(){return n},n}function I(){var n=Object(u.a)([""]);return I=function(){return n},n}var A=s.c.div(I()),J=s.c.div(E());function T(){return Object(r.jsx)(A,{children:Object(r.jsx)(J,{children:"\xa9 2020 Heidi Powered by React"})})}var U=e(29);function B(){var n=Object(u.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return B=function(){return n},n}var M=s.c.div(B());function R(){return Object(r.jsx)(M,{children:Object(r.jsx)(U.PuffLoader,{size:60,color:"#4A90E2"})})}function G(){var n=Object(u.a)(["\n  margin-top: 24px;\n  text-align: center;\n\n  a {\n    border-radius: 30px;\n    font-size: 16px;\n    padding: 8px 10px;\n    border: 1px solid #555;\n    background: #555;\n    color: #eee;\n    text-decoration: none;\n  }\n"]);return G=function(){return n},n}function H(){var n=Object(u.a)(["\n  font-size: 20px;\n  letter-spacing: 3px;\n  line-height: 1.5;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 550px;\n  max-height: 100px;\n"]);return H=function(){return n},n}function q(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.5);\n"]);return q=function(){return n},n}function K(){var n=Object(u.a)(["\n  font-size: 24px;\n  font-weight: 700;\n  color: #333;\n  text-decoration: none;\n"]);return K=function(){return n},n}function Q(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n"]);return Q=function(){return n},n}function V(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n  padding: 20px 0;\n\n  "," {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n"]);return V=function(){return n},n}function W(){var n=Object(u.a)(["\n  text-align: center;\n  font-size: 30px;\n  font-weight: 700;\n  color: #333;\n"]);return W=function(){return n},n}function X(){var n=Object(u.a)(["\n  max-width: 600px;\n  margin: 0 auto;\n  padding: 40px 60px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 10px;\n  background: rgba(246, 246, 246, 0.9);\n\n  "," {\n    margin: 30px auto;\n    padding: 30px;\n  }\n"]);return X=function(){return n},n}function Y(){var n=Object(u.a)(["\n  min-height: 100vh;\n"]);return Y=function(){return n},n}var Z=s.c.div(Y()),$=s.c.div(X(),w),nn=s.c.div(W()),tn=s.c.div(V(),w),en=s.c.div(Q()),rn=Object(s.c)(b.b)(K()),cn=s.c.div(q()),on=s.c.div(H()),an=s.c.div(G());function un(n){var t=n.post;return Object(r.jsxs)(tn,{children:[Object(r.jsxs)(en,{children:[Object(r.jsxs)(rn,{to:"/post/".concat(t.id),children:["[#",t.id,"] ",t.title]}),Object(r.jsx)(cn,{children:new Date(t.createdAt).toLocaleDateString()})]}),Object(r.jsx)(on,{children:t.body})]})}function sn(){var n=Object(c.useContext)(p),t=n.isLoading,e=n.setIsLoading,i=Object(c.useState)([]),o=Object(a.a)(i,2),u=o[0],s=o[1];return Object(c.useEffect)((function(){e(!0),fetch("".concat(O,"/posts?_limit=5&_sort=createdAt&_order=desc")).then((function(n){return n.json()})).then((function(n){return s(n)})).then((function(){e(!1)}))}),[e]),Object(r.jsx)(Z,{children:t?Object(r.jsx)(R,{}):Object(r.jsxs)($,{children:[Object(r.jsx)(nn,{children:"\u6700\u65b0\u6587\u7ae0"}),u&&u.map((function(n){return Object(r.jsx)(un,{post:n},n.id)})),Object(r.jsx)(an,{children:Object(r.jsx)(b.b,{to:"/post-list",children:"\u67e5\u770b\u66f4\u591a"})})]})})}function dn(){var n=Object(u.a)(["\n  margin-bottom: 16px;\n  color: #db4c3f;\n  font-weight: 700;\n"]);return dn=function(){return n},n}function bn(){var n=Object(u.a)(["\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  background: #eee;\n  color: #555;\n"]);return bn=function(){return n},n}function jn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-evenly;\n\n  & button {\n    background: #555;\n    color: #eee;\n    outline: transparent;\n  }\n\n  & button,\n  a {\n    cursor: pointer;\n    border-radius: 20px;\n    font-size: 18px;\n    padding: 6px 20px;\n    border: 1px solid #555;\n  }\n"]);return jn=function(){return n},n}function xn(){var n=Object(u.a)(["\n  margin-bottom: 28px;\n\n  & input {\n    width: 100%;\n    padding: 8px;\n    font-size: 18px;\n    outline: transparent;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    letter-spacing: 1.5px;\n    margin-top: 8px;\n  }\n"]);return xn=function(){return n},n}function pn(){var n=Object(u.a)(["\n  font-size: 28px;\n  font-weight: 700;\n  margin-bottom: 28px;\n  text-align: center;\n"]);return pn=function(){return n},n}function fn(){var n=Object(u.a)(["\n  max-width: 350px;\n  margin: 100px auto;\n  padding: 30px 50px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n  font-size: 18px;\n"]);return fn=function(){return n},n}function ln(){var n=Object(u.a)(["\n  height: 100vh;\n"]);return ln=function(){return n},n}var hn=s.c.div(ln()),On=s.c.form(fn()),gn=s.c.div(pn()),vn=s.c.div(xn()),mn=s.c.div(jn()),wn=Object(s.c)(b.b)(bn()),yn=s.c.div(dn());function kn(){var n=Object(c.useContext)(x).setUser,t=Object(c.useState)(""),e=Object(a.a)(t,2),i=e[0],o=e[1],u=Object(c.useState)(""),s=Object(a.a)(u,2),d=s[0],b=s[1],p=Object(c.useState)(),f=Object(a.a)(p,2),h=f[0],g=f[1],m=Object(j.f)(),w=function(){g(null)};return Object(r.jsx)(hn,{children:Object(r.jsxs)(On,{onSubmit:function(t){t.preventDefault(),function(n){var t=n.username,e=n.password;return fetch("".concat(O,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:e})}).then((function(n){return n.json()}))}({username:i,password:d}).then((function(t){if(0===t.ok)return g(t.message);l(t.token),v().then((function(t){1!==t.ok&&(l(null),g(t.toString())),n(t.data),m.push("/")}))}))},children:[Object(r.jsx)(gn,{children:"\u767b\u5165"}),h&&Object(r.jsx)(yn,{children:h}),Object(r.jsxs)(vn,{children:["username:"," ",Object(r.jsx)("input",{value:i,onChange:function(n){o(n.target.value)},onFocus:w})]}),Object(r.jsxs)(vn,{children:["password:",Object(r.jsx)("input",{type:"password",value:d,onChange:function(n){b(n.target.value)},onFocus:w})]}),Object(r.jsxs)(mn,{children:[Object(r.jsx)(wn,{to:"/register",children:"\u5efa\u7acb\u5e33\u865f"}),Object(r.jsx)("button",{children:"\u767b\u5165"})]})]})})}function zn(){var n=Object(u.a)(["\n  margin-bottom: 16px;\n  color: #db4c3f;\n  font-weight: 700;\n"]);return zn=function(){return n},n}function Sn(){var n=Object(u.a)(["\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  background: #eee;\n  color: #555;\n"]);return Sn=function(){return n},n}function Cn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-evenly;\n\n  & button {\n    background: #555;\n    color: #eee;\n    outline: transparent;\n  }\n\n  & button,\n  a {\n    cursor: pointer;\n    border-radius: 20px;\n    font-size: 18px;\n    padding: 6px 20px;\n    border: 1px solid #555;\n  }\n"]);return Cn=function(){return n},n}function Ln(){var n=Object(u.a)(["\n  margin-bottom: 28px;\n\n  & input {\n    width: 100%;\n    padding: 8px;\n    font-size: 18px;\n    outline: transparent;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    letter-spacing: 1.5px;\n    margin-top: 8px;\n  }\n"]);return Ln=function(){return n},n}function Pn(){var n=Object(u.a)(["\n  font-size: 28px;\n  font-weight: 700;\n  margin-bottom: 28px;\n  text-align: center;\n"]);return Pn=function(){return n},n}function Nn(){var n=Object(u.a)(["\n  max-width: 350px;\n  margin: 100px auto;\n  padding: 30px 50px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n  font-size: 18px;\n"]);return Nn=function(){return n},n}function Dn(){var n=Object(u.a)(["\n  height: 100vh;\n"]);return Dn=function(){return n},n}var Fn=s.c.div(Dn()),_n=s.c.form(Nn()),En=s.c.div(Pn()),In=s.c.div(Ln()),An=s.c.div(Cn()),Jn=Object(s.c)(b.b)(Sn()),Tn=s.c.div(zn());function Un(){var n=Object(c.useContext)(x).setUser,t=Object(c.useState)(""),e=Object(a.a)(t,2),i=e[0],o=e[1],u=Object(c.useState)(""),s=Object(a.a)(u,2),d=s[0],b=s[1],p=Object(c.useState)(""),f=Object(a.a)(p,2),h=f[0],g=f[1],m=Object(c.useState)(),w=Object(a.a)(m,2),y=w[0],k=w[1],z=Object(j.f)(),S=function(){k(null)};return Object(r.jsx)(Fn,{children:Object(r.jsxs)(_n,{onSubmit:function(t){t.preventDefault(),function(n){var t=n.username,e=n.password,r=n.nickname;return fetch("".concat(O,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:r,username:t,password:e})}).then((function(n){return n.json()}))}({username:i,password:d,nickname:h}).then((function(t){if(0===t.ok)return k(t.message);l(t.token),v().then((function(t){1!==t.ok&&(l(null),k(t.toString())),n(t.data),z.push("/")}))}))},children:[Object(r.jsx)(En,{children:"\u8a3b\u518a"}),y&&Object(r.jsx)(Tn,{children:y}),Object(r.jsxs)(In,{children:["nickname:",Object(r.jsx)("input",{value:h,onChange:function(n){g(n.target.value)},onFocus:S})]}),Object(r.jsxs)(In,{children:["username:",Object(r.jsx)("input",{value:i,onChange:function(n){o(n.target.value)},onFocus:S})]}),Object(r.jsxs)(In,{children:["password:",Object(r.jsx)("input",{type:"password",value:d,onChange:function(n){b(n.target.value)},onFocus:S})]}),Object(r.jsxs)(An,{children:[Object(r.jsx)(Jn,{to:"/login",children:"\u5df2\u6709\u5e33\u865f"}),Object(r.jsx)("button",{children:"\u8a3b\u518a"})]})]})})}function Bn(){var n=Object(u.a)(["\n  line-height: 1.5;\n  font-size: 20px;\n"]);return Bn=function(){return n},n}function Mn(){var n=Object(u.a)(["\n  text-align: center;\n  font-size: 28px;\n  font-weight: 700;\n  margin-bottom: 20px;\n"]);return Mn=function(){return n},n}function Rn(){var n=Object(u.a)(["\n  max-width: 500px;\n  margin: 100px auto;\n  padding: 40px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n"]);return Rn=function(){return n},n}function Gn(){var n=Object(u.a)(["\n  min-height: 100vh;\n"]);return Gn=function(){return n},n}var Hn=s.c.div(Gn()),qn=s.c.div(Rn()),Kn=s.c.h2(Mn()),Qn=s.c.div(Bn());function Vn(){return Object(r.jsx)(Hn,{children:Object(r.jsxs)(qn,{children:[Object(r.jsx)(Kn,{children:"\u95dc\u65bc\u6211"}),Object(r.jsxs)(Qn,{children:[Object(r.jsx)("p",{children:"\u55e8\uff0c\u6211\u662f Heidi\uff0c\u548c\u963f\u723e\u5351\u65af\u5c71\u4e0a\u7684\u6d77\u8482\u540c\u540d\uff0c\u5922\u60f3\u662f\u8d70\u904d\u4e16\u754c\u5404\u8655\uff0c\u7559\u4e0b\u81ea\u5df1\u7684\u8173\u5370\u3002"}),Object(r.jsx)("p",{children:"\u56e0\u7de3\u969b\u6703\u4e4b\u4e0b\uff0c\u5f9e 2020 \u5e74 3 \u6708\u958b\u59cb\u5b78\u7fd2\u5beb\u7a0b\u5f0f\uff0c\u76ee\u524d\u662f Lidemy \u7a0b\u5f0f\u5c0e\u5e2b\u8a08\u756b\u7b2c\u56db\u671f\u7684\u5b78\u751f\uff0c\u76ee\u6a19\u5728\u660e\u5e74\u521d\u6210\u529f\u8f49\u8077\u6210\u70ba\u4e00\u540d\u524d\u7aef\u5de5\u7a0b\u5e2b\u3002"})]})]})})}function Wn(){var n=Object(u.a)(["\n  border: 1px solid #555;\n  border-radius: 50%;\n  padding: 8px 12px;\n  font-size: 16px;\n  outline: transparent;\n  cursor: pointer;\n  margin-right: 4px;\n\n  background: ",";\n  color: ",";\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.5);\n    color: #eee;\n  }\n"]);return Wn=function(){return n},n}function Xn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 8px;\n  margin-top: 20px;\n"]);return Xn=function(){return n},n}function Yn(){var n=Object(u.a)([""]);return Yn=function(){return n},n}var Zn=s.c.div(Yn()),$n=s.c.div(Xn()),nt=s.c.button(Wn(),(function(n){return"selected"===n.className?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.1)"}),(function(n){return"selected"===n.className?"#eee":"rgba(0, 0, 0, 0.5)"}));function tt(n){var t=n.setPosts,e=n.limit,c=n.totalPages,i=n.currentPage,o=n.setCurrentPage;return Object(r.jsx)(Zn,{children:Object(r.jsx)($n,{children:c.current&&c.current.map((function(n){return Object(r.jsx)(nt,{onClick:function(){return function(n){g(n,e).then((function(n){return t(n)})),o(n)}(n)},className:i===n?"selected":"",children:n},n)}))})})}function et(){var n=Object(u.a)(["\n  color: white;\n  background-color: #db4c3f;\n  border: 1px solid transparent;\n  border-radius: 20px;\n  font-size: 14px;\n  width: 46px;\n  height: 26px;\n  cursor: pointer;\n"]);return et=function(){return n},n}function rt(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.5);\n  margin-left: 8px;\n"]);return rt=function(){return n},n}function ct(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n"]);return ct=function(){return n},n}function it(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n\n  "," {\n    margin-bottom: 8px;\n  }\n"]);return it=function(){return n},n}function ot(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n  padding: 30px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 700;\n\n  "," {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n"]);return ot=function(){return n},n}function at(){var n=Object(u.a)(["\n  text-align: center;\n  font-size: 30px;\n  font-weight: 700;\n  color: #333;\n"]);return at=function(){return n},n}function ut(){var n=Object(u.a)(["\n  max-width: 600px;\n  margin: 0 auto;\n  padding: 40px 60px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 10px;\n  background: rgba(246, 246, 246, 0.9);\n"]);return ut=function(){return n},n}function st(){var n=Object(u.a)(["\n  min-height: 100vh;\n"]);return st=function(){return n},n}var dt=s.c.div(st()),bt=s.c.div(ut()),jt=s.c.div(at()),xt=s.c.div(ot(),w),pt=Object(s.c)(b.b)(it(),w),ft=s.c.div(ct()),lt=s.c.div(rt()),ht=s.c.button(et());function Ot(n){var t=n.post,e=n.handleDeletePost;return Object(r.jsxs)(xt,{children:[Object(r.jsxs)(pt,{to:"/post/".concat(t.id),children:["[#",t.id,"] ",t.title]}),Object(r.jsxs)(ft,{children:[Object(r.jsx)(ht,{onClick:function(){e(t.id)},children:"\u522a\u9664"}),Object(r.jsx)(lt,{children:new Date(t.createdAt).toLocaleDateString()})]})]})}function gt(){var n=Object(c.useContext)(p),t=n.isLoading,e=n.setIsLoading,i=Object(c.useState)([]),o=Object(a.a)(i,2),u=o[0],s=o[1],d=Object(c.useState)(1),b=Object(a.a)(d,2),j=b[0],x=b[1],f=Object(c.useRef)();Object(c.useEffect)((function(){e(!0),fetch("".concat(O,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()})).then((function(n){f.current=function(n){for(var t=[],e=1;e<=n;e++)t.push(e);return t}(Math.ceil(n.length/5))})),g(1,5).then((function(n){return s(n)})).then((function(){e(!1)}))}),[e]);var l=function(n){e(!0),function(n){return fetch("https://student-json-api.lidemy.me/posts/"+n,{method:"DELETE"}).then((function(n){return n.json()}))}(n).then((function(){s(u.filter((function(t){return t.id!==n})))})).catch((function(n){console.log(n)})).then(e(!1))};return Object(r.jsx)(dt,{children:t?Object(r.jsx)(R,{}):Object(r.jsxs)(bt,{children:[Object(r.jsx)(jt,{children:"\u6587\u7ae0\u5217\u8868"}),u.map((function(n){return Object(r.jsx)(Ot,{post:n,handleDeletePost:l},n.id)})),Object(r.jsx)(tt,{totalPages:f,limit:5,setPosts:s,currentPage:j,setCurrentPage:x})]})})}function vt(){var n=Object(u.a)(["\n  font-size: 20px;\n  letter-spacing: 3px;\n  line-height: 1.5;\n  word-break: break-all;\n  white-space: pre-line;\n"]);return vt=function(){return n},n}function mt(){var n=Object(u.a)([""]);return mt=function(){return n},n}function wt(){var n=Object(u.a)([""]);return wt=function(){return n},n}function yt(){var n=Object(u.a)(["\n  margin: 16px 0;\n  padding: 8px 0;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  font-size: 16px;\n  color: rgba(0, 0, 0, 0.4);\n\n  & div {\n    margin-top: 8px;\n  }\n"]);return yt=function(){return n},n}function kt(){var n=Object(u.a)(["\n  font-size: 36px;\n  font-weight: 700;\n"]);return kt=function(){return n},n}function zt(){var n=Object(u.a)(["\n  padding: 60px;\n  max-width: 900px;\n  margin: 00px auto;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 6px;\n  background: rgba(246, 246, 246, 0.9);\n\n  "," {\n    padding: 40px 20px;\n  }\n"]);return zt=function(){return n},n}function St(){var n=Object(u.a)(["\n  min-height: 100vh;\n"]);return St=function(){return n},n}var Ct=s.c.div(St()),Lt=s.c.div(zt(),w),Pt=s.c.div(kt()),Nt=s.c.div(yt()),Dt=s.c.div(wt()),Ft=s.c.div(mt()),_t=s.c.div(vt());function Et(){var n=Object(c.useContext)(p),t=n.isLoading,e=n.setIsLoading,i=Object(c.useState)(null),o=Object(a.a)(i,2),u=o[0],s=o[1],d=Object(j.h)().id;return Object(c.useEffect)((function(){e(!0),function(n){return fetch("".concat(O,"/posts?id=").concat(n,"&_expand=user")).then((function(n){return n.json()}))}(d).then((function(n){return s(n[0])})).then((function(){return e(!1)}))}),[e]),Object(r.jsx)(Ct,{children:t?Object(r.jsx)(R,{}):Object(r.jsxs)(Lt,{children:[Object(r.jsx)(Pt,{children:u&&u.title}),Object(r.jsxs)(Nt,{children:[Object(r.jsxs)(Dt,{children:["\u4f5c\u8005\uff1a",u&&u.user.username]}),Object(r.jsxs)(Ft,{children:["\u6642\u9593\uff1a",u&&new Date(u.createdAt).toLocaleString()]})]}),Object(r.jsx)(_t,{children:u&&u.body})]})})}function It(){var n=Object(u.a)(["\n  font-weight: 700;\n  color: #555;\n"]);return It=function(){return n},n}function At(){var n=Object(u.a)(["\n  color: #db4c3f;\n  font-weight: 700;\n"]);return At=function(){return n},n}function Jt(){var n=Object(u.a)(["\n  margin-top: 16px;\n  text-align: center;\n\n  button {\n    color: #ddd;\n    background-color: #343a40;\n    border-radius: 4px;\n    font-size: 16px;\n    padding: 6px 16px;\n    cursor: pointer;\n    border-radius: 20px;\n    border: 1px solid #555;\n    outline: transparent;\n  }\n"]);return Jt=function(){return n},n}function Tt(){var n=Object(u.a)(["\n  width: 100%;\n  padding: 8px;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n  font-size: 18px;\n  letter-spacing: 1.5px;\n"]);return Tt=function(){return n},n}function Ut(){var n=Object(u.a)(["\n  width: 100%;\n  padding: 8px;\n  font-size: 18px;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n  letter-spacing: 1.5px;\n"]);return Ut=function(){return n},n}function Bt(){var n=Object(u.a)(["\n  margin: 10px 0;\n  font-size: 20px;\n"]);return Bt=function(){return n},n}function Mt(){var n=Object(u.a)(["\n  max-width: 600px;\n  margin: 60px auto;\n  padding: 40px 60px;\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.4);\n  border-radius: 10px;\n  background: rgba(246, 246, 246, 0.9);\n  font-size: 18px;\n\n  "," {\n    margin: 30px auto;\n  }\n"]);return Mt=function(){return n},n}function Rt(){var n=Object(u.a)(["\n  min-height: 100vh;\n"]);return Rt=function(){return n},n}var Gt=s.c.div(Rt()),Ht=s.c.form(Mt(),w),qt=s.c.div(Bt()),Kt=s.c.input(Ut()),Qt=s.c.textarea(Tt()),Vt=s.c.div(Jt()),Wt=s.c.div(At()),Xt=s.c.div(It());function Yt(){var n=Object(c.useContext)(p),t=n.isLoading,e=n.setIsLoading,i=Object(c.useState)(""),o=Object(a.a)(i,2),u=o[0],s=o[1],d=Object(c.useState)(""),b=Object(a.a)(d,2),x=b[0],f=b[1],l=Object(c.useState)(),g=Object(a.a)(l,2),v=g[0],m=g[1],w=Object(j.f)();return Object(r.jsx)(Gt,{children:Object(r.jsxs)(Ht,{onSubmit:function(n){n.preventDefault(),e(!0),function(n,t){var e=h();return fetch("".concat(O,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(e),"content-type":"application/json"},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(u,x).then((function(n){e(!1),0!==n.ok?w.push("/"):m(n.message)})).catch((function(n){m(n.message)}))},children:[v&&Object(r.jsx)(Wt,{children:v}),Object(r.jsx)(qt,{children:"\u6587\u7ae0\u6a19\u984c"}),Object(r.jsx)(Kt,{value:u,onChange:function(n){s(n.target.value)},onFocus:function(){m(null)}}),Object(r.jsx)(qt,{children:"\u6587\u7ae0\u5167\u5bb9"}),Object(r.jsx)(Qt,{value:x,onChange:function(n){f(n.target.value)},onFocus:function(){m(null)},rows:14}),Object(r.jsx)(Vt,{children:t?Object(r.jsx)(Xt,{children:"\u767c\u5e03\u4e2d..."}):Object(r.jsx)("button",{children:"\u767c\u5e03"})})]})})}function Zt(){var n=Object(u.a)(["\n  padding: 100px 10px;\n  background-size: cover;\n  background: url(",") center center fixed no-repeat;\n"]);return Zt=function(){return n},n}function $t(){var n=Object(u.a)(['\n  font-family: "monospace", "\u5fae\u8edf\u6b63\u9ed1\u9ad4";\n  color: #4a4a4a;\n  box-sizing: border-box;\n  height: 100%;\n']);return $t=function(){return n},n}var ne=s.c.div($t()),te=s.c.div(Zt(),m);function ee(){var n=Object(c.useState)(""),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(c.useState)(!1),u=Object(a.a)(o,2),s=u[0],f=u[1],l=Object(c.useState)(!0),O=Object(a.a)(l,2),g=O[0],m=O[1];return console.log(e),Object(c.useEffect)((function(){h()&&v().then((function(n){n.ok&&(i(n.data),m(!1))})),m(!1)}),[]),Object(r.jsx)(x.Provider,{value:{user:e,setUser:i},children:Object(r.jsxs)(ne,{children:[Object(r.jsx)(d.a,{}),Object(r.jsx)(p.Provider,{value:{isLoading:s,setIsLoading:f,isLoadingGetMe:g},children:Object(r.jsx)(te,{children:Object(r.jsxs)(b.a,{children:[Object(r.jsx)(_,{}),Object(r.jsxs)(j.c,{children:[Object(r.jsx)(j.a,{exact:!0,path:"/",children:Object(r.jsx)(sn,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/about",children:Object(r.jsx)(Vn,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/post-list/",children:Object(r.jsx)(gt,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/post/:id",children:Object(r.jsx)(Et,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/new-post",children:Object(r.jsx)(Yt,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/register",children:Object(r.jsx)(Un,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/login",children:Object(r.jsx)(kn,{})})]})]})})}),Object(r.jsx)(T,{})]})})}o.a.render(Object(r.jsx)(ee,{}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.2a1b6636.chunk.js.map